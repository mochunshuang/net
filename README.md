# TAPS 

## NETTS

~~~c++
+-----------------------------------------------------+
|                    Application                      |
+-----------------------------------------------------+
        |                 |                  |
  +------------+     +------------+    +--------------+
  |  DNS stub  |     | Stream API |    | Datagram API |
  |  resolver  |     +------------+    +--------------+
  +------------+          |                  |
                    +---------------------------------+
                    |    TCP                UDP       |
                    |    Kernel Networking Stack      |
                    +---------------------------------+
                                    |
+-----------------------------------------------------+
|               Network Layer Interface               |
+-----------------------------------------------------+
~~~

## TAPS 

~~~c++
+-----------------------------------------------------+
|                    Application                      |
+-----------------------------------------------------+
                          |
+-----------------------------------------------------+
|              Transport Services API                 |
+-----------------------------------------------------+
                          |
+-----------------------------------------------------+
|          Transport Services Implementation          |
|  (Using: DNS, UDP, TCP, SCTP, DCCP, TLS, QUIC, etc) |
+-----------------------------------------------------+
                          |
+-----------------------------------------------------+
|               Network Layer Interface               |
+-----------------------------------------------------+
~~~



# net





## IOCP

~~~c++
+----------------+       +----------------+       +----------------+
|   I/O Thread 1 |       |   I/O Thread 2 |       |   I/O Thread N |
| (GetQueued..)  |       | (GetQueued..)  | ...  | (GetQueued..)  |
+-------+--------+       +-------+--------+       +--------+-------+
        |                        |                         |
        |                        |                         |
        +------------------------+-------------------------+
                                  |
                           +------v------+
                           | 完成端口队列  |
                           |  (Single IOCP) |
                           +------+------+
                                  |
                           +------v------+
                           |  系统I/O操作 |
                           | (WSASend/Recv)|
                           +--------------+

+----------------+       +----------------+       +----------------+
| Worker Thread 1|       | Worker Thread 2| ...  | Worker Thread M|
| (Process Tasks)|       | (Process Tasks)|      | (Process Tasks)|
+----------------+       +----------------+       +----------------+
        ^                         ^                        ^
        |                         |                        |
        +-------------------------+------------------------+
        |                         |						   |
 +------v------+           +------v------+      	+------v------+
 |  任务队列    |		 	|  任务队列    |           |  任务队列    |
 |(Thread-safe)| 		   |(Thread-safe)|           |(Thread-safe)|
 +-------------+		   +-------------+           +-------------+
~~~

